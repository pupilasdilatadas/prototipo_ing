<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mensajes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous" />
    <link href="css/style.css" rel="stylesheet" />

    <script src="js/cargar-componentes.js"></script>
</head>

<body>
    <div id="header-container" style="border-bottom: solid #FF9000;"></div>

    <main>

        <div class="row">
            <div class="col-md-4 m-0 p-0">
                <!-- Columna izquierda - Lista de chats -->
                <div class="chat-list">
                    <!-- Aquí puedes agregar la lista de chats -->
                    <div id="chat-1" class="bg-dark-subtle" style="border: solid #FF9000;">
                        <h2>Severus Snape</h2><br><br>
                    </div>
                    <div id="chat-2" class="" style="border: solid #FF9000;">
                        <h2>Harry Potter</h2><br><br><br>
                    </div>
                    <div id="chat-3" class="" style="border: solid #FF9000;">
                        <h2>Albus Dombuldore</h2> <br><br><br>
                    </div>
                    <div id="chat-4" class="" style="border: solid #FF9000;">
                        <h2>Bingus</h2>
                        </form>
                        <br><br><br>
                    </div>
                </div>
            </div>
            <div class="col-md-8 m-0 p-0">
                <!-- Columna derecha - Chat seleccionado -->
                <div class="chat-selected">
                    <!-- Aquí puedes mostrar el chat seleccionado -->
                    <div id="chat-1" class="chat-container bg-dark-subtle">
                        <h2>Severus Snape</h2><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
                        <ul class="chat-messages" style="text-align: left;">Bienvenido a nuestra gran sede donde
                            aprenderas y divertiras en un
                            mundo lleno de magia!</ul>
                        <form class="message-form">
                            <input type="text" class="message-input" placeholder="Escribe tu mensaje..." required>
                            <button type="submit">Enviar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <div id="footer-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>
    <script>
        // Cargar los componentes en los contenedores correspondientes
        // Obtener el rol del usuario almacenado en el almacenamiento local
        const userRole = localStorage.getItem('role');
        if (userRole === 'admin') {
            loadComponent("headerAdmin.html", "header-container", "navbar-mensajes", "active");
        } else {
            loadComponent("headerAlumno.html", "header-container", "navbar-mensajes", "active");
        }
        loadComponent("footer.html", "footer-container", "");


        const chatContainers = document.querySelectorAll('.chat-container');

        // Agrega un evento de clic para cada contenedor de chat
        chatContainers.forEach((container) => {
            const chatMessages = container.querySelector('.chat-messages');
            const messageForm = container.querySelector('.message-form');
            const messageInput = container.querySelector('.message-input');

            // Agrega un evento de escucha para el envío del formulario de mensajes
            messageForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Obtén el texto del mensaje ingresado por el usuario
                const messageText = messageInput.value;

                // Crea un nuevo elemento <li> con el mensaje y agrega al chat
                const messageItem = document.createElement('li');
                messageItem.textContent = messageText;
                messageItem.classList.add('my-message');
                chatMessages.appendChild(messageItem);

                // Restablece el campo de entrada de texto
                messageInput.value = '';

                // Simular respuesta de Severus Snape
                if (container.id === 'chat-1') {
                    setTimeout(function () {
                        const responseItem = document.createElement('li');
                        responseItem.textContent = 'De nada, para más información dirigete al meson de informaciones magicas!';
                        chatMessages.appendChild(responseItem);
                    }, 1000);
                }
            });
        });
    </script>
    <style>
        .my-message {
            text-align: right;
            background-color: #DCF8C6;
        }

        .snape-message {
            text-align: left;
            background-color: #F4F4F4;
        }
    </style>
</body>

</html>